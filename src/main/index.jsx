// @ts-nocheck
/*global chrome*/
import './style.scss';

import React from 'react';
import { useState, useEffect, useMemo } from 'react';
import { FontAwesomeIcon } from '@fortawesome/react-fontawesome'
import { faCopy, faExternalLinkSquareAlt } from '@fortawesome/free-solid-svg-icons'
import { copyTextToClipboard } from '../helper';
import SdkHandler from "../sdk-handler"
import Context from "../context"
import Loading from "../loading"
import CfHandler from "../cf-handler"

const mock = {
  "sked-default.standard-schemas": "{\"value\":[{\"name\":\"AccountResourceScores\",\"label\":\"Account Resource Scores\",\"mapping\":\"sked__Account_Resource_Score__c\"},{\"name\":\"AccountTags\",\"label\":\"Account Tags\",\"mapping\":\"sked__Account_Tag__c\"},{\"name\":\"Accounts\",\"label\":\"Accounts\",\"mapping\":\"Account\"},{\"name\":\"Activities\",\"label\":\"Activities\",\"mapping\":\"sked__Activity__c\"},{\"name\":\"ActivityResources\",\"label\":\"Activity Resources\",\"mapping\":\"sked__Activity_Resource__c\"},{\"name\":\"Attendees\",\"label\":\"Attendees\",\"mapping\":\"sked__Attendee__c\"},{\"name\":\"Availabilities\",\"label\":\"Availabilities\",\"mapping\":\"sked__Availability__c\"},{\"name\":\"AvailabilityPatternResources\",\"label\":\"Availability Pattern Resources\",\"mapping\":\"sked__Availability_Pattern_Resource__c\"},{\"name\":\"AvailabilityPatterns\",\"label\":\"Availability Patterns\",\"mapping\":\"sked__Availability_Pattern__c\"},{\"name\":\"AvailabilityTemplateEntries\",\"label\":\"Availability Template Entries\",\"mapping\":\"sked__Availability_Template_Entry__c\"},{\"name\":\"AvailabilityTemplateResources\",\"label\":\"Availability Template Resources\",\"mapping\":\"sked__Availability_Template_Resource__c\"},{\"name\":\"AvailabilityTemplates\",\"label\":\"Availability Templates\",\"mapping\":\"sked__Availability_Template__c\"},{\"name\":\"ClientAvailabilities\",\"label\":\"Client Availabilities\",\"mapping\":\"sked__Client_Availability__c\"},{\"name\":\"ContactTags\",\"label\":\"Contact Tags\",\"mapping\":\"sked__Contact_Tag__c\"},{\"name\":\"Contacts\",\"label\":\"Contacts\",\"mapping\":\"Contact\"},{\"name\":\"HolidayRegions\",\"label\":\"Holiday Regions\",\"mapping\":\"sked__Holiday_Region__c\"},{\"name\":\"Holidays\",\"label\":\"Holidays\",\"mapping\":\"sked__Holiday__c\"},{\"name\":\"JobAllocations\",\"label\":\"Job Allocations\",\"mapping\":\"sked__Job_Allocation__c\"},{\"name\":\"JobOffers\",\"label\":\"Job Offers\",\"mapping\":\"sked__Job_Offer__c\"},{\"name\":\"JobProducts\",\"label\":\"Job Products\",\"mapping\":\"sked__Job_Product__c\"},{\"name\":\"JobTags\",\"label\":\"Job Tags\",\"mapping\":\"sked__Job_Tag__c\"},{\"name\":\"JobTasks\",\"label\":\"Job Tasks\",\"mapping\":\"sked__Job_Task__c\"},{\"name\":\"JobTimeConstraints\",\"label\":\"Job Time Constraints\",\"mapping\":\"sked__Job_Time_Constraint__c\"},{\"name\":\"Jobs\",\"label\":\"Jobs\",\"mapping\":\"sked__Job__c\"},{\"name\":\"LocationResourceScores\",\"label\":\"Location Resource Scores\",\"mapping\":\"sked__Location_Resource_Score__c\"},{\"name\":\"Locations\",\"label\":\"Locations\",\"mapping\":\"sked__Location__c\"},{\"name\":\"Preferences\",\"label\":\"Preferences\",\"mapping\":\"sked__Preferences__c\"},{\"name\":\"Products\",\"label\":\"Products\",\"mapping\":\"Product2\"},{\"name\":\"RecurringSchedules\",\"label\":\"Recurring Schedules\",\"mapping\":\"sked__Recurring_Schedule__c\"},{\"name\":\"Regions\",\"label\":\"Regions\",\"mapping\":\"sked__Region__c\"},{\"name\":\"ResourceJobOffers\",\"label\":\"Resource Job Offers\",\"mapping\":\"sked__Resource_Job_Offer__c\"},{\"name\":\"ResourceOverrideRegions\",\"label\":\"Resource Override Regions\",\"mapping\":\"sked__Resource_Override_Region__c\"},{\"name\":\"ResourceOverrides\",\"label\":\"Resource Overrides\",\"mapping\":\"sked__Resource_Override__c\"},{\"name\":\"ResourceRegions\",\"label\":\"Resource Regions\",\"mapping\":\"sked__Resource_Region__c\"},{\"name\":\"ResourceRequirementTags\",\"label\":\"Resource Requirement Tags\",\"mapping\":\"sked__Resource_Requirement_Tag__c\"},{\"name\":\"ResourceRequirements\",\"label\":\"Resource Requirements\",\"mapping\":\"sked__Resource_Requirement__c\"},{\"name\":\"ResourceShiftBreaks\",\"label\":\"Resource Shift Breaks\",\"mapping\":\"sked__Resource_Shift_Break__c\"},{\"name\":\"ResourceShiftOffers\",\"label\":\"Resource Shift Offers\",\"mapping\":\"sked__Resource_Shift_Offer__c\"},{\"name\":\"ResourceShifts\",\"label\":\"Resource Shifts\",\"mapping\":\"sked__Resource_Shift__c\"},{\"name\":\"ResourceTags\",\"label\":\"Resource Tags\",\"mapping\":\"sked__Resource_Tag__c\"},{\"name\":\"Resources\",\"label\":\"Resources\",\"mapping\":\"sked__Resource__c\"},{\"name\":\"ScheduleTemplates\",\"label\":\"Schedule Templates\",\"mapping\":\"sked__Schedule_Template__c\"},{\"name\":\"ShiftOfferShifts\",\"label\":\"Shift Offer Shifts\",\"mapping\":\"sked__Shift_Offer_Shift__c\"},{\"name\":\"ShiftOffers\",\"label\":\"Shift Offers\",\"mapping\":\"sked__Shift_Offer__c\"},{\"name\":\"ShiftTags\",\"label\":\"Shift Tags\",\"mapping\":\"sked__Shift_Tag__c\"},{\"name\":\"Shifts\",\"label\":\"Shifts\",\"mapping\":\"sked__Shift__c\"},{\"name\":\"Tags\",\"label\":\"Tags\",\"mapping\":\"sked__Tag__c\"},{\"name\":\"TemplatedActivities\",\"label\":\"Templated Activities\",\"mapping\":\"sked__Templated_Activity__c\"},{\"name\":\"TemplatedActivityResources\",\"label\":\"Templated Activity Resources\",\"mapping\":\"sked__Templated_Activity_Resource__c\"},{\"name\":\"TemplatedAttendees\",\"label\":\"Templated Attendees\",\"mapping\":\"sked__Templated_Attendee__c\"},{\"name\":\"TemplatedJobAllocations\",\"label\":\"Templated Job Allocations\",\"mapping\":\"sked__Templated_Job_Allocation__c\"},{\"name\":\"TemplatedJobProducts\",\"label\":\"Templated Job Products\",\"mapping\":\"sked__Templated_Job_Product__c\"},{\"name\":\"TemplatedJobTags\",\"label\":\"Templated Job Tags\",\"mapping\":\"sked__Templated_Job_Tag__c\"},{\"name\":\"TemplatedJobTasks\",\"label\":\"Templated Job Tasks\",\"mapping\":\"sked__Templated_Job_Task__c\"},{\"name\":\"TemplatedJobTimeConstraints\",\"label\":\"Templated Job Time Constraints\",\"mapping\":\"sked__Templated_Job_Time_Constraint__c\"},{\"name\":\"TemplatedJobs\",\"label\":\"Templated Jobs\",\"mapping\":\"sked__Templated_Job__c\"},{\"name\":\"TemplatedResourceRequirementTags\",\"label\":\"Templated Resource Requirement Tags\",\"mapping\":\"sked__Templated_Resource_Requirement_Tag__c\"},{\"name\":\"TemplatedResourceRequirements\",\"label\":\"Templated Resource Requirements\",\"mapping\":\"sked__Templated_Resource_Requirement__c\"},{\"name\":\"TemplatedResourceShifts\",\"label\":\"Templated Resource Shifts\",\"mapping\":\"sked__Templated_Resource_Shift__c\"},{\"name\":\"TemplatedShiftTags\",\"label\":\"Templated Shift Tags\",\"mapping\":\"sked__Templated_Shift_Tag__c\"},{\"name\":\"TemplatedShifts\",\"label\":\"Templated Shifts\",\"mapping\":\"sked__Templated_Shift__c\"},{\"name\":\"Users\",\"label\":\"Users\",\"mapping\":\"User\"}],\"expiry\":1594281100194}",
  "latest-subRoute-console": "calendar",
  "auth": "{\"idToken\":\"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IlEwWXdOekF5UTBFME1UTXdRa05FTWpWQ05rRTVSRFUxTURoRk16TXhNa1kyTVRFelFVSkJRUSJ9.eyJodHRwczovL2FwaS5za2VkdWxvLmNvbS91c2VyX2lkIjoic2FsZXNmb3JjZS1zYW5kYm94fDAwNTJTMDAwMDA5d3prMVFBQSIsImh0dHBzOi8vYXBpLnNrZWR1bG8uY29tL3ZlbmRvciI6InNhbGVzZm9yY2UiLCJodHRwczovL2FwaS5za2VkdWxvLmNvbS91c2VybmFtZSI6ImV4cGVydHNlcnZpY2VzQHNrZWR1bG8uY29tLnNrZWR1bG9kIiwiaHR0cHM6Ly9hcGkuc2tlZHVsby5jb20vb3JnYW5pemF0aW9uX2lkIjoiMDBEMTcwMDAwMDBEdWNuRUFDIiwiaHR0cHM6Ly9hcGkuc2tlZHVsby5jb20vbmFtZSI6IlNrZWR1bG8gQWRtaW4iLCJodHRwczovL2FwaS5za2VkdWxvLmNvbS9zZl9lbnYiOiJzYWxlc2ZvcmNlLXNhbmRib3giLCJodHRwczovL2FwaS5za2VkdWxvLmNvbS9yZXNvdXJjZV9pZCI6bnVsbCwiaHR0cHM6Ly9hcGkuc2tlZHVsby5jb20vcm9sZXMiOlsiYWRtaW5pc3RyYXRvciJdLCJodHRwczovL2FwaS5za2VkdWxvLmNvbS92ZW4iOnsiY29tbXVuaXR5X2lkIjpudWxsLCJ1c2VyX2lkIjoiMDA1MlMwMDAwMDl3emsxUUFBIn0sImlzcyI6Imh0dHBzOi8vc2tlZHVsby5hdXRoMC5jb20vIiwic3ViIjoic2FsZXNmb3JjZS1zYW5kYm94fDAwNTJTMDAwMDA5d3prMVFBQSIsImF1ZCI6IjltRUpDMHFLRVpJblRhOE8ydVMzMG1kd0xVeWo2WXJIIiwiaWF0IjoxNTk0MTk0NjkzLCJleHAiOjE1OTQyODEwOTMsImF0X2hhc2giOiJpaG1KVVFQMDk0aEk5cWhrZXhpM2JBIiwibm9uY2UiOiJEQklkMFZON2ZyQk90R0VKeFF-SUIzUHNVRjdpQlBYdCJ9.OYpZQJeO1VJnX5HwSF3BXzjHVr8qWVVtsmxd4vAZheu7i9BSBweNOVvkRQ3T7dLV91BzZgDm-wltWS-7lWlF9o4Vlrq2VvQA12bOtME5ObZli8t4c3f7zw9wOqzZFKq7nzdraCudGAUjGholyDiIkVNAKnKSBzAqlaHzclWixNnQUV1rh4_e9wh5QxEQhj5jFsTKAgSqlJzrWrmNm2ig9kCuv54mr2K_rDPWJLoNVoUO2YDFh1AxiJTJzQzcnW_jrtSs_F5vh9qtFnipQdx1UKaXruLyQYSgf-ALqx1-tyHmcJycVICf09BsdDi5WEiKlImJLtmKd7CJ59jFufOSjA\",\"profile\":{\"https://api.skedulo.com/user_id\":\"salesforce-sandbox|0052S000009wzk1QAA\",\"https://api.skedulo.com/vendor\":\"salesforce\",\"https://api.skedulo.com/username\":\"expertservices@skedulo.com.skedulod\",\"https://api.skedulo.com/organization_id\":\"00D17000000DucnEAC\",\"https://api.skedulo.com/name\":\"Skedulo Admin\",\"https://api.skedulo.com/sf_env\":\"salesforce-sandbox\",\"https://api.skedulo.com/resource_id\":null,\"https://api.skedulo.com/roles\":[\"administrator\"],\"https://api.skedulo.com/ven\":{\"community_id\":null,\"user_id\":\"0052S000009wzk1QAA\"},\"iss\":\"https://skedulo.auth0.com/\",\"sub\":\"salesforce-sandbox|0052S000009wzk1QAA\",\"aud\":\"9mEJC0qKEZInTa8O2uS30mdwLUyj6YrH\",\"iat\":1594194693,\"exp\":1594281093,\"at_hash\":\"ihmJUQP094hI9qhkexi3bA\",\"nonce\":\"DBId0VN7frBOtGEJxQ~IB3PsUF7iBPXt\"},\"skedApiAccessToken\":\"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IlEwWXdOekF5UTBFME1UTXdRa05FTWpWQ05rRTVSRFUxTURoRk16TXhNa1kyTVRFelFVSkJRUSJ9.eyJodHRwczovL2FwaS5za2VkdWxvLmNvbS91c2VyX2lkIjoic2FsZXNmb3JjZS1zYW5kYm94fDAwNTJTMDAwMDA5d3prMVFBQSIsImh0dHBzOi8vYXBpLnNrZWR1bG8uY29tL3ZlbmRvciI6InNhbGVzZm9yY2UiLCJodHRwczovL2FwaS5za2VkdWxvLmNvbS91c2VybmFtZSI6ImV4cGVydHNlcnZpY2VzQHNrZWR1bG8uY29tLnNrZWR1bG9kIiwiaHR0cHM6Ly9hcGkuc2tlZHVsby5jb20vb3JnYW5pemF0aW9uX2lkIjoiMDBEMTcwMDAwMDBEdWNuRUFDIiwiaHR0cHM6Ly9hcGkuc2tlZHVsby5jb20vbmFtZSI6IlNrZWR1bG8gQWRtaW4iLCJodHRwczovL2FwaS5za2VkdWxvLmNvbS9zZl9lbnYiOiJzYWxlc2ZvcmNlLXNhbmRib3giLCJodHRwczovL2FwaS5za2VkdWxvLmNvbS9yZXNvdXJjZV9pZCI6bnVsbCwiaHR0cHM6Ly9hcGkuc2tlZHVsby5jb20vcm9sZXMiOlsiYWRtaW5pc3RyYXRvciJdLCJodHRwczovL2FwaS5za2VkdWxvLmNvbS92ZW4iOnsiY29tbXVuaXR5X2lkIjpudWxsLCJ1c2VyX2lkIjoiMDA1MlMwMDAwMDl3emsxUUFBIn0sImlzcyI6Imh0dHBzOi8vc2tlZHVsby5hdXRoMC5jb20vIiwic3ViIjoic2FsZXNmb3JjZS1zYW5kYm94fDAwNTJTMDAwMDA5d3prMVFBQSIsImF1ZCI6WyJodHRwczovL2FwaS5za2VkdWxvLmNvbSIsImh0dHBzOi8vc2tlZHVsby5hdXRoMC5jb20vdXNlcmluZm8iXSwiaWF0IjoxNTk0MTk0NjkzLCJleHAiOjE1OTQyMzc4OTMsImF6cCI6IjltRUpDMHFLRVpJblRhOE8ydVMzMG1kd0xVeWo2WXJIIiwic2NvcGUiOiJvcGVuaWQifQ.MUmag1cmULtHKf_Cj2060Jz7aKUBVDuYaQpDH8lJN_gecNeQtFrps-WpSAxEd9OYqOhqQRJoEEFt4E8SkLIGG01SpTnqBWPzaAH7Fpn18wGBrJviXGdBiyJPGWkhrw7LN0YwBG9EtINDRo5YXR92hAZxl45QyO8_FIsRJJtBjVolRqjgK8v_lU7ef1SqS8-1Dm92ocPlR58E7YjD0GIHrCX8VRGgi8NpJuSmz02xDCpx46TwZQsNMRUBannY_IznkZ37Xt_sSXUm-ZChEMPGQ59B-PoaUHFqLF0yvv4aCKlTcjImOgt39a_l4tUcmD_bgVbcngsm9hE5sef7QbtEbA\",\"accessTokenExpiry\":1594237893,\"sfdc\":{\"access_token\":\"00D17000000Ducn!AQ4AQF_ZgoUi0yVKvdgWyHiwXYZpZTKT60WaJCCk7N3RQMDp7GxK.xAcPOnRi1vRwEYhS4b36iYJtghv.gsieApjbgfh5lfW\",\"instance_url\":\"https://bioreferencelabs--skedulod.my.salesforce.com\",\"expiry\":null}}",
  "persist:viewStore": "{\"console\":{\"startDate\":\"2020-07-08T00:00:00.000\",\"jobsRespectDate\":true,\"jobSort\":{\"selectedSort\":\"Job number\",\"sortOrder\":0},\"isStatusPanelOpen\":true,\"isJobListPanelOpen\":true}}",
  "developmentModeEnabled": "false",
  "sked-default.currentResource-0052S000009wzk1QAA": "{\"value\":[],\"expiry\":1594198301742}",
  "team_env": "{\"region\":\"us\",\"team\":{\"name\":\"bioreflab\",\"tenantId\":null},\"auth0\":{\"clientId\":\"9mEJC0qKEZInTa8O2uS30mdwLUyj6YrH\",\"audience\":\"https://api.skedulo.com\",\"domain\":\"skedulo.auth0.com\",\"lock\":{\"allowedConnections\":[\"salesforce\",\"salesforce-sandbox\"],\"theme\":{\"authButtons\":{\"salesforce\":{\"displayName\":\"Salesforce\"},\"salesforce-sandbox\":{\"displayName\":\"Salesforce Sandbox\"}}}}},\"server\":{\"api\":\"https://api.skedulo.com\"},\"tenantId\":null}",
  "sked-default.schemaVocab": "{\"value\":{\"Availabilities\":{\"Type\":[{\"controllingField\":\"IsAvailable\",\"label\":\"Sick\",\"controller\":\"sked__Is_Available__c\",\"defaultValue\":false,\"value\":\"Sick\",\"validFor\":[\"false\"],\"active\":true},{\"controllingField\":\"IsAvailable\",\"label\":\"Leave\",\"controller\":\"sked__Is_Available__c\",\"defaultValue\":false,\"value\":\"Leave\",\"validFor\":[\"false\"],\"active\":true},{\"controllingField\":\"IsAvailable\",\"label\":\"Occupied\",\"controller\":\"sked__Is_Available__c\",\"defaultValue\":false,\"value\":\"Occupied\",\"validFor\":[\"false\"],\"active\":true},{\"controllingField\":\"IsAvailable\",\"label\":\"Overtime\",\"controller\":\"sked__Is_Available__c\",\"defaultValue\":false,\"value\":\"Overtime\",\"validFor\":[\"true\"],\"active\":true},{\"controllingField\":\"IsAvailable\",\"label\":\"Weekend Shift\",\"controller\":\"sked__Is_Available__c\",\"defaultValue\":false,\"value\":\"Weekend Shift\",\"validFor\":[\"true\"],\"active\":true}],\"Status\":[{\"controllingField\":null,\"label\":\"Pending\",\"controller\":null,\"defaultValue\":false,\"value\":\"Pending\",\"validFor\":[],\"active\":true},{\"controllingField\":null,\"label\":\"Approved\",\"controller\":null,\"defaultValue\":false,\"value\":\"Approved\",\"validFor\":[],\"active\":true},{\"controllingField\":null,\"label\":\"Declined\",\"controller\":null,\"defaultValue\":false,\"value\":\"Declined\",\"validFor\":[],\"active\":true}]},\"Jobs\":{\"AbortReason\":[{\"controllingField\":null,\"label\":\"Testing no longer required\",\"controller\":null,\"defaultValue\":false,\"value\":\"Testing no longer required\",\"validFor\":[],\"active\":true},{\"controllingField\":null,\"label\":\"Patient Unavailable\",\"controller\":null,\"defaultValue\":false,\"value\":\"Patient Unavailable\",\"validFor\":[],\"active\":true},{\"controllingField\":null,\"label\":\"Other\",\"controller\":null,\"defaultValue\":false,\"value\":\"Other\",\"validFor\":[],\"active\":true}],\"JobStatus\":[{\"controllingField\":null,\"label\":\"Queued\",\"controller\":null,\"defaultValue\":true,\"value\":\"Queued\",\"validFor\":[],\"active\":true},{\"controllingField\":null,\"label\":\"Pending Allocation\",\"controller\":null,\"defaultValue\":false,\"value\":\"Pending Allocation\",\"validFor\":[],\"active\":true},{\"controllingField\":null,\"label\":\"Pending Dispatch\",\"controller\":null,\"defaultValue\":false,\"value\":\"Pending Dispatch\",\"validFor\":[],\"active\":true},{\"controllingField\":null,\"label\":\"Dispatched\",\"controller\":null,\"defaultValue\":false,\"value\":\"Dispatched\",\"validFor\":[],\"active\":true},{\"controllingField\":null,\"label\":\"Ready\",\"controller\":null,\"defaultValue\":false,\"value\":\"Ready\",\"validFor\":[],\"active\":true},{\"controllingField\":null,\"label\":\"En Route\",\"controller\":null,\"defaultValue\":false,\"value\":\"En Route\",\"validFor\":[],\"active\":true},{\"controllingField\":null,\"label\":\"On Site\",\"controller\":null,\"defaultValue\":false,\"value\":\"On Site\",\"validFor\":[],\"active\":true},{\"controllingField\":null,\"label\":\"In Progress\",\"controller\":null,\"defaultValue\":false,\"value\":\"In Progress\",\"validFor\":[],\"active\":true},{\"controllingField\":null,\"label\":\"Complete\",\"controller\":null,\"defaultValue\":false,\"value\":\"Complete\",\"validFor\":[],\"active\":true},{\"controllingField\":null,\"label\":\"Cancelled\",\"controller\":null,\"defaultValue\":false,\"value\":\"Cancelled\",\"validFor\":[],\"active\":true}],\"CustomerConfirmationStatus\":[{\"controllingField\":null,\"label\":\"Pending\",\"controller\":null,\"defaultValue\":false,\"value\":\"Pending\",\"validFor\":[],\"active\":true},{\"controllingField\":null,\"label\":\"Confirmed\",\"controller\":null,\"defaultValue\":false,\"value\":\"Confirmed\",\"validFor\":[],\"active\":true},{\"controllingField\":null,\"label\":\"Declined\",\"controller\":null,\"defaultValue\":false,\"value\":\"Declined\",\"validFor\":[],\"active\":true},{\"controllingField\":null,\"label\":\"Error\",\"controller\":null,\"defaultValue\":false,\"value\":\"Error\",\"validFor\":[],\"active\":true}],\"FollowupReason\":[{\"controllingField\":null,\"label\":\"Not Ready\",\"controller\":null,\"defaultValue\":false,\"value\":\"Not Ready\",\"validFor\":[],\"active\":true},{\"controllingField\":null,\"label\":\"Needs more time\",\"controller\":null,\"defaultValue\":false,\"value\":\"Needs more time\",\"validFor\":[],\"active\":true}],\"Urgency\":[{\"controllingField\":null,\"label\":\"Normal\",\"controller\":null,\"defaultValue\":false,\"value\":\"Normal\",\"validFor\":[],\"active\":true},{\"controllingField\":null,\"label\":\"Urgent\",\"controller\":null,\"defaultValue\":false,\"value\":\"Urgent\",\"validFor\":[],\"active\":true},{\"controllingField\":null,\"label\":\"Critical\",\"controller\":null,\"defaultValue\":false,\"value\":\"Critical\",\"validFor\":[],\"active\":true}],\"Type\":[{\"controllingField\":null,\"label\":\"Installation\",\"controller\":null,\"defaultValue\":false,\"value\":\"Installation\",\"validFor\":[],\"active\":true},{\"controllingField\":null,\"label\":\"Upgrade\",\"controller\":null,\"defaultValue\":false,\"value\":\"Upgrade\",\"validFor\":[],\"active\":true},{\"controllingField\":null,\"label\":\"Break Fix\",\"controller\":null,\"defaultValue\":false,\"value\":\"Break Fix\",\"validFor\":[],\"active\":true},{\"controllingField\":null,\"label\":\"Maintenance\",\"controller\":null,\"defaultValue\":false,\"value\":\"Maintenance\",\"validFor\":[],\"active\":true}]},\"Resources\":{\"CountryCode\":[{\"controllingField\":null,\"label\":\"AU\",\"controller\":null,\"defaultValue\":false,\"value\":\"AU\",\"validFor\":[],\"active\":true},{\"controllingField\":null,\"label\":\"NZ\",\"controller\":null,\"defaultValue\":false,\"value\":\"NZ\",\"validFor\":[],\"active\":true},{\"controllingField\":null,\"label\":\"UK\",\"controller\":null,\"defaultValue\":false,\"value\":\"UK\",\"validFor\":[],\"active\":true},{\"controllingField\":null,\"label\":\"US\",\"controller\":null,\"defaultValue\":false,\"value\":\"US\",\"validFor\":[],\"active\":true},{\"controllingField\":null,\"label\":\"CA\",\"controller\":null,\"defaultValue\":false,\"value\":\"CA\",\"validFor\":[],\"active\":true}],\"Category\":[{\"controllingField\":null,\"label\":\"Customer Service\",\"controller\":null,\"defaultValue\":true,\"value\":\"Customer Service\",\"validFor\":[],\"active\":true},{\"controllingField\":null,\"label\":\"Installation Technician\",\"controller\":null,\"defaultValue\":false,\"value\":\"Installation Technician\",\"validFor\":[],\"active\":true},{\"controllingField\":null,\"label\":\"Electrician\",\"controller\":null,\"defaultValue\":false,\"value\":\"Electrician\",\"validFor\":[],\"active\":true}],\"ResourceType\":[{\"controllingField\":null,\"label\":\"Person\",\"controller\":null,\"defaultValue\":false,\"value\":\"Person\",\"validFor\":[],\"active\":true},{\"controllingField\":null,\"label\":\"Asset\",\"controller\":null,\"defaultValue\":false,\"value\":\"Asset\",\"validFor\":[],\"active\":true}],\"EmploymentType\":[{\"controllingField\":null,\"label\":\"Full-time\",\"controller\":null,\"defaultValue\":false,\"value\":\"Full-time\",\"validFor\":[],\"active\":true},{\"controllingField\":null,\"label\":\"Part-time\",\"controller\":null,\"defaultValue\":false,\"value\":\"Part-time\",\"validFor\":[],\"active\":true},{\"controllingField\":null,\"label\":\"Casual\",\"controller\":null,\"defaultValue\":false,\"value\":\"Casual\",\"validFor\":[],\"active\":true},{\"controllingField\":null,\"label\":\"Agency\",\"controller\":null,\"defaultValue\":false,\"value\":\"Agency\",\"validFor\":[],\"active\":true}],\"WorkingHourType\":[{\"controllingField\":null,\"label\":\"Availability\",\"controller\":null,\"defaultValue\":false,\"value\":\"Availability\",\"validFor\":[],\"active\":true},{\"controllingField\":null,\"label\":\"Shift\",\"controller\":null,\"defaultValue\":false,\"value\":\"Shift\",\"validFor\":[],\"active\":true}],\"NotificationType\":[{\"controllingField\":null,\"label\":\"sms\",\"controller\":null,\"defaultValue\":false,\"value\":\"sms\",\"validFor\":[],\"active\":true},{\"controllingField\":null,\"label\":\"push\",\"controller\":null,\"defaultValue\":false,\"value\":\"push\",\"validFor\":[],\"active\":true}]},\"Activities\":{\"Type\":[{\"controllingField\":null,\"label\":\"Meal Break\",\"controller\":null,\"defaultValue\":false,\"value\":\"Meal Break\",\"validFor\":[],\"active\":true},{\"controllingField\":null,\"label\":\"Administration\",\"controller\":null,\"defaultValue\":false,\"value\":\"Administration\",\"validFor\":[],\"active\":true},{\"controllingField\":null,\"label\":\"Travel\",\"controller\":null,\"defaultValue\":false,\"value\":\"Travel\",\"validFor\":[],\"active\":true},{\"controllingField\":null,\"label\":\"Miscellaneous\",\"controller\":null,\"defaultValue\":false,\"value\":\"Miscellaneous\",\"validFor\":[],\"active\":true}]}},\"expiry\":1594281100825}",
  "customFields": "{\"GridSettings\":{\"name\":\"GridSettings\",\"description\":null,\"label\":\"Grid Settings\",\"mapping\":\"Grid_Settings__c\",\"id\":\"6361ebd7-c3db-4bb1-8e5f-b6bde41afbf5\",\"isStandard\":false,\"fields\":[{\"id\":\"7e2a5fc0-0b16-40b7-8379-76bff01d403a\",\"name\":\"Name\",\"schemaName\":\"GridSettings\",\"label\":\"Name\",\"description\":null,\"fieldType\":\"string\",\"mapping\":\"Name\",\"referenceSchemaName\":null,\"referenceSchemaFieldName\":null,\"required\":false,\"upsertKey\":false,\"accessMode\":\"read_write\",\"readOnly\":false,\"maxLength\":80,\"precision\":0,\"scale\":0,\"isAlert\":false,\"showIf\":null,\"showDesktop\":false,\"showMobile\":false,\"editableOnMobile\":false,\"requiredOnMobile\":false,\"displayOrder\":0},{\"id\":\"45de5774-ff63-4094-aa51-874ed80789b7\",\"name\":\"UID\",\"schemaName\":\"GridSettings\",\"label\":\"UID\",\"description\":null,\"fieldType\":\"id\",\"mapping\":\"Id\",\"referenceSchemaName\":null,\"referenceSchemaFieldName\":null,\"required\":true,\"upsertKey\":false,\"accessMode\":\"read_only\",\"readOnly\":true,\"maxLength\":18,\"precision\":0,\"scale\":0,\"isAlert\":false,\"showIf\":null,\"showDesktop\":false,\"showMobile\":false,\"editableOnMobile\":false,\"requiredOnMobile\":false,\"displayOrder\":1},{\"id\":\"2516b0cd-cc25-4df7-93a9-36cb2643370f\",\"name\":\"CanArriveBeforeMins\",\"schemaName\":\"GridSettings\",\"label\":\"Can Arrive Before (mins)\",\"description\":null,\"fieldType\":\"double\",\"mapping\":\"Arrive_Before__c\",\"referenceSchemaName\":null,\"referenceSchemaFieldName\":null,\"required\":false,\"upsertKey\":false,\"accessMode\":\"read_write\",\"readOnly\":false,\"maxLength\":null,\"precision\":3,\"scale\":0,\"isAlert\":false,\"showIf\":null,\"showDesktop\":false,\"showMobile\":false,\"editableOnMobile\":false,\"requiredOnMobile\":false,\"displayOrder\":2}]},\"ObjectMapping\":{\"name\":\"ObjectMapping\",\"description\":null,\"label\":\"Object Mappings\",\"mapping\":\"sked_Object_Mapping__c\",\"id\":\"9ba2bc61-ef46-46a1-892a-fe4b65c279d9\",\"isStandard\":false,\"fields\":[{\"id\":\"37c74b17-1333-47b7-87c5-7b2d2868a10b\",\"name\":\"Name\",\"schemaName\":\"ObjectMapping\",\"label\":\"Name\",\"description\":null,\"fieldType\":\"string\",\"mapping\":\"Name\",\"referenceSchemaName\":null,\"referenceSchemaFieldName\":null,\"required\":false,\"upsertKey\":false,\"accessMode\":\"read_write\",\"readOnly\":false,\"maxLength\":80,\"precision\":0,\"scale\":0,\"isAlert\":false,\"showIf\":null,\"showDesktop\":false,\"showMobile\":false,\"editableOnMobile\":false,\"requiredOnMobile\":false,\"displayOrder\":0},{\"id\":\"0783acc2-4796-40a9-b02b-bd29525058ac\",\"name\":\"UID\",\"schemaName\":\"ObjectMapping\",\"label\":\"UID\",\"description\":null,\"fieldType\":\"id\",\"mapping\":\"Id\",\"referenceSchemaName\":null,\"referenceSchemaFieldName\":null,\"required\":true,\"upsertKey\":false,\"accessMode\":\"read_only\",\"readOnly\":true,\"maxLength\":18,\"precision\":0,\"scale\":0,\"isAlert\":false,\"showIf\":null,\"showDesktop\":false,\"showMobile\":false,\"editableOnMobile\":false,\"requiredOnMobile\":false,\"displayOrder\":1},{\"id\":\"17e7c7fc-1deb-43f9-a84d-87b99bafd602\",\"name\":\"SourceObject\",\"schemaName\":\"ObjectMapping\",\"label\":\"Source Object\",\"description\":null,\"fieldType\":\"string\",\"mapping\":\"sked_Source_Object__c\",\"referenceSchemaName\":null,\"referenceSchemaFieldName\":null,\"required\":false,\"upsertKey\":false,\"accessMode\":\"read_write\",\"readOnly\":false,\"maxLength\":255,\"precision\":0,\"scale\":0,\"isAlert\":false,\"showIf\":null,\"showDesktop\":false,\"showMobile\":false,\"editableOnMobile\":false,\"requiredOnMobile\":false,\"displayOrder\":2},{\"id\":\"b9af3543-98a3-439b-b321-01683bf4c839\",\"name\":\"IsActive\",\"schemaName\":\"ObjectMapping\",\"label\":\"Is Active\",\"description\":null,\"fieldType\":\"boolean\",\"mapping\":\"sked_Is_Active__c\",\"referenceSchemaName\":null,\"referenceSchemaFieldName\":null,\"required\":true,\"upsertKey\":false,\"accessMode\":\"read_write\",\"readOnly\":false,\"maxLength\":0,\"precision\":0,\"scale\":0,\"isAlert\":false,\"showIf\":null,\"showDesktop\":true,\"showMobile\":false,\"editableOnMobile\":false,\"requiredOnMobile\":false,\"displayOrder\":3},{\"id\":\"39cce241-a41a-4ad2-bc79-87743e5e56ef\",\"name\":\"TargetObject\",\"schemaName\":\"ObjectMapping\",\"label\":\"Target Object\",\"description\":null,\"fieldType\":\"string\",\"mapping\":\"sked_Target_Object__c\",\"referenceSchemaName\":null,\"referenceSchemaFieldName\":null,\"required\":false,\"upsertKey\":false,\"accessMode\":\"read_write\",\"readOnly\":false,\"maxLength\":255,\"precision\":0,\"scale\":0,\"isAlert\":false,\"showIf\":null,\"showDesktop\":false,\"showMobile\":false,\"editableOnMobile\":false,\"requiredOnMobile\":false,\"displayOrder\":4}]},\"ObjectFieldMapping\":{\"name\":\"ObjectFieldMapping\",\"description\":null,\"label\":\"Object Field Mapping\",\"mapping\":\"sked_Object_Field_Mapping__c\",\"id\":\"f5c3aad4-15cf-4cf9-9993-42b28a868a56\",\"isStandard\":false,\"fields\":[{\"id\":\"6834a417-1439-45e9-b400-2f087e6d65b0\",\"name\":\"Name\",\"schemaName\":\"ObjectFieldMapping\",\"label\":\"Name\",\"description\":null,\"fieldType\":\"string\",\"mapping\":\"Name\",\"referenceSchemaName\":null,\"referenceSchemaFieldName\":null,\"required\":false,\"upsertKey\":false,\"accessMode\":\"read_write\",\"readOnly\":false,\"maxLength\":80,\"precision\":0,\"scale\":0,\"isAlert\":false,\"showIf\":null,\"showDesktop\":false,\"showMobile\":false,\"editableOnMobile\":false,\"requiredOnMobile\":false,\"displayOrder\":0},{\"id\":\"291697ad-1613-4eb3-a04d-38575df81db3\",\"name\":\"UID\",\"schemaName\":\"ObjectFieldMapping\",\"label\":\"UID\",\"description\":null,\"fieldType\":\"id\",\"mapping\":\"Id\",\"referenceSchemaName\":null,\"referenceSchemaFieldName\":null,\"required\":true,\"upsertKey\":false,\"accessMode\":\"read_only\",\"readOnly\":true,\"maxLength\":18,\"precision\":0,\"scale\":0,\"isAlert\":false,\"showIf\":null,\"showDesktop\":false,\"showMobile\":false,\"editableOnMobile\":false,\"requiredOnMobile\":false,\"displayOrder\":1},{\"id\":\"781767ca-2dc8-4bc9-b33c-fc7decfd9761\",\"name\":\"ObjectMapping\",\"schemaName\":\"ObjectFieldMapping\",\"label\":\"Object Mapping\",\"description\":null,\"fieldType\":\"reference\",\"mapping\":\"sked_Object_Mapping__r\",\"referenceSchemaName\":\"ObjectMapping\",\"referenceSchemaFieldName\":null,\"required\":true,\"upsertKey\":false,\"accessMode\":\"insert_only\",\"readOnly\":false,\"maxLength\":18,\"precision\":0,\"scale\":0,\"isAlert\":false,\"showIf\":null,\"showDesktop\":true,\"showMobile\":false,\"editableOnMobile\":false,\"requiredOnMobile\":false,\"displayOrder\":2},{\"id\":\"cc0732c8-6894-454a-a64c-3bc7bcd15fba\",\"name\":\"TargetField\",\"schemaName\":\"ObjectFieldMapping\",\"label\":\"Target Field\",\"description\":null,\"fieldType\":\"string\",\"mapping\":\"sked_Target_Field__c\",\"referenceSchemaName\":null,\"referenceSchemaFieldName\":null,\"required\":false,\"upsertKey\":false,\"accessMode\":\"read_write\",\"readOnly\":false,\"maxLength\":255,\"precision\":0,\"scale\":0,\"isAlert\":false,\"showIf\":null,\"showDesktop\":false,\"showMobile\":false,\"editableOnMobile\":false,\"requiredOnMobile\":false,\"displayOrder\":3},{\"id\":\"af86c677-88fb-4944-b9f2-f422f531b629\",\"name\":\"IsActive\",\"schemaName\":\"ObjectFieldMapping\",\"label\":\"Is Active\",\"description\":null,\"fieldType\":\"boolean\",\"mapping\":\"sked_Is_Active__c\",\"referenceSchemaName\":null,\"referenceSchemaFieldName\":null,\"required\":true,\"upsertKey\":false,\"accessMode\":\"read_write\",\"readOnly\":false,\"maxLength\":0,\"precision\":0,\"scale\":0,\"isAlert\":false,\"showIf\":null,\"showDesktop\":true,\"showMobile\":false,\"editableOnMobile\":false,\"requiredOnMobile\":false,\"displayOrder\":4},{\"id\":\"152f209d-d20d-48db-af3c-8926c0f87fb0\",\"name\":\"SourceField\",\"schemaName\":\"ObjectFieldMapping\",\"label\":\"Source Field\",\"description\":null,\"fieldType\":\"textarea\",\"mapping\":\"sked_Source_Field__c\",\"referenceSchemaName\":null,\"referenceSchemaFieldName\":null,\"required\":false,\"upsertKey\":false,\"accessMode\":\"read_write\",\"readOnly\":false,\"maxLength\":1024,\"precision\":0,\"scale\":0,\"isAlert\":false,\"showIf\":null,\"showDesktop\":false,\"showMobile\":false,\"editableOnMobile\":false,\"requiredOnMobile\":false,\"displayOrder\":5}]},\"Contacts\":{\"name\":\"Contacts\",\"label\":\"Contacts\",\"mapping\":\"Contact\",\"isStandard\":true,\"fields\":[{\"id\":\"2f232dc9-2fda-4df3-86f6-59f4d5c5ba88\",\"name\":\"MailingCountry\",\"schemaName\":\"Contacts\",\"label\":\"Mailing Country\",\"description\":null,\"fieldType\":\"string\",\"mapping\":\"MailingCountry\",\"referenceSchemaName\":null,\"referenceSchemaFieldName\":null,\"required\":false,\"upsertKey\":false,\"accessMode\":\"read_write\",\"readOnly\":false,\"maxLength\":80,\"precision\":0,\"scale\":0,\"isAlert\":false,\"showIf\":null,\"showDesktop\":false,\"showMobile\":false,\"editableOnMobile\":false,\"requiredOnMobile\":false,\"displayOrder\":1},{\"id\":\"b6447823-14dc-4fd4-97dc-ca02bf7823ac\",\"name\":\"Gender\",\"schemaName\":\"Contacts\",\"label\":\"Gender\",\"description\":null,\"fieldType\":\"picklist\",\"mapping\":\"Gender__c\",\"referenceSchemaName\":null,\"referenceSchemaFieldName\":null,\"required\":false,\"upsertKey\":false,\"accessMode\":\"read_write\",\"readOnly\":false,\"maxLength\":255,\"precision\":0,\"scale\":0,\"isAlert\":false,\"showIf\":null,\"showDesktop\":false,\"showMobile\":false,\"editableOnMobile\":false,\"requiredOnMobile\":false,\"displayOrder\":2}]},\"Jobs\":{\"name\":\"Jobs\",\"label\":\"Jobs\",\"mapping\":\"sked__Job__c\",\"isStandard\":true,\"fields\":[{\"id\":\"e0ad87cf-ecf1-4578-be91-05e8aafdb35a\",\"name\":\"ConfirmationNumber\",\"schemaName\":\"Jobs\",\"label\":\"Confirmation Number\",\"description\":null,\"fieldType\":\"string\",\"mapping\":\"Confirmation_Number__c\",\"referenceSchemaName\":null,\"referenceSchemaFieldName\":null,\"required\":false,\"upsertKey\":false,\"accessMode\":\"read_write\",\"readOnly\":false,\"maxLength\":20,\"precision\":0,\"scale\":0,\"isAlert\":false,\"showIf\":null,\"showDesktop\":false,\"showMobile\":false,\"editableOnMobile\":false,\"requiredOnMobile\":false,\"displayOrder\":0},{\"id\":\"7261c11a-cac7-4834-9634-15948c2a23b3\",\"name\":\"CollectionDate\",\"schemaName\":\"Jobs\",\"label\":\"Collection Date\",\"description\":null,\"fieldType\":\"date\",\"mapping\":\"Collection_Date__c\",\"referenceSchemaName\":null,\"referenceSchemaFieldName\":null,\"required\":false,\"upsertKey\":false,\"accessMode\":\"read_write\",\"readOnly\":false,\"maxLength\":null,\"precision\":0,\"scale\":0,\"isAlert\":false,\"showIf\":null,\"showDesktop\":false,\"showMobile\":false,\"editableOnMobile\":false,\"requiredOnMobile\":false,\"displayOrder\":1},{\"id\":\"3fab6349-386d-4061-ba04-ecf64179539b\",\"name\":\"CollectionTime\",\"schemaName\":\"Jobs\",\"label\":\"Collection Time\",\"description\":null,\"fieldType\":\"time\",\"mapping\":\"Collection_Time__c\",\"referenceSchemaName\":null,\"referenceSchemaFieldName\":null,\"required\":false,\"upsertKey\":false,\"accessMode\":\"read_write\",\"readOnly\":false,\"maxLength\":null,\"precision\":0,\"scale\":0,\"isAlert\":false,\"showIf\":null,\"showDesktop\":false,\"showMobile\":false,\"editableOnMobile\":false,\"requiredOnMobile\":false,\"displayOrder\":2},{\"id\":\"5f24193e-1952-48b2-855c-6a10b1c2d496\",\"name\":\"ReportComments\",\"schemaName\":\"Jobs\",\"label\":\"Report Comments\",\"description\":null,\"fieldType\":\"textarea\",\"mapping\":\"Report_Comments__c\",\"referenceSchemaName\":null,\"referenceSchemaFieldName\":null,\"required\":false,\"upsertKey\":false,\"accessMode\":\"read_write\",\"readOnly\":false,\"maxLength\":255,\"precision\":0,\"scale\":0,\"isAlert\":false,\"showIf\":null,\"showDesktop\":false,\"showMobile\":false,\"editableOnMobile\":false,\"requiredOnMobile\":false,\"displayOrder\":3},{\"id\":\"6237f075-59fc-4e5a-bc62-daf90dcc69c7\",\"name\":\"DateOfService\",\"schemaName\":\"Jobs\",\"label\":\"Date of Service\",\"description\":null,\"fieldType\":\"date\",\"mapping\":\"Date_of_Service__c\",\"referenceSchemaName\":null,\"referenceSchemaFieldName\":null,\"required\":false,\"upsertKey\":false,\"accessMode\":\"read_write\",\"readOnly\":false,\"maxLength\":null,\"precision\":0,\"scale\":0,\"isAlert\":false,\"showIf\":null,\"showDesktop\":false,\"showMobile\":false,\"editableOnMobile\":false,\"requiredOnMobile\":false,\"displayOrder\":5},{\"id\":\"29603e5e-0c7f-4746-9d63-df233779f805\",\"name\":\"AccessionNumber\",\"schemaName\":\"Jobs\",\"label\":\"Accession Number\",\"description\":null,\"fieldType\":\"string\",\"mapping\":\"Accession_Number__c\",\"referenceSchemaName\":null,\"referenceSchemaFieldName\":null,\"required\":false,\"upsertKey\":false,\"accessMode\":\"read_write\",\"readOnly\":false,\"maxLength\":100,\"precision\":0,\"scale\":0,\"isAlert\":false,\"showIf\":null,\"showDesktop\":false,\"showMobile\":false,\"editableOnMobile\":false,\"requiredOnMobile\":false,\"displayOrder\":6}]},\"Accounts\":{\"name\":\"Accounts\",\"label\":\"Accounts\",\"mapping\":\"Account\",\"isStandard\":true,\"fields\":[{\"id\":\"3730cf59-ebe8-47e2-a5fb-4e11c5d76100\",\"name\":\"FirstName\",\"schemaName\":\"Accounts\",\"label\":\"First Name\",\"description\":null,\"fieldType\":\"string\",\"mapping\":\"FirstName\",\"referenceSchemaName\":null,\"referenceSchemaFieldName\":null,\"required\":false,\"upsertKey\":false,\"accessMode\":\"read_write\",\"readOnly\":false,\"maxLength\":40,\"precision\":0,\"scale\":0,\"isAlert\":false,\"showIf\":null,\"showDesktop\":false,\"showMobile\":false,\"editableOnMobile\":false,\"requiredOnMobile\":false,\"displayOrder\":0},{\"id\":\"8769954f-6875-4fca-a8ab-dfe499d3646d\",\"name\":\"LastName\",\"schemaName\":\"Accounts\",\"label\":\"Last Name\",\"description\":null,\"fieldType\":\"string\",\"mapping\":\"LastName\",\"referenceSchemaName\":null,\"referenceSchemaFieldName\":null,\"required\":false,\"upsertKey\":false,\"accessMode\":\"read_write\",\"readOnly\":false,\"maxLength\":80,\"precision\":0,\"scale\":0,\"isAlert\":false,\"showIf\":null,\"showDesktop\":false,\"showMobile\":false,\"editableOnMobile\":false,\"requiredOnMobile\":false,\"displayOrder\":1},{\"id\":\"1f503a56-b449-4914-954f-9bd66ff961ba\",\"name\":\"Sex\",\"schemaName\":\"Accounts\",\"label\":\"Sex\",\"description\":null,\"fieldType\":\"picklist\",\"mapping\":\"Sex__c\",\"referenceSchemaName\":null,\"referenceSchemaFieldName\":null,\"required\":false,\"upsertKey\":false,\"accessMode\":\"read_write\",\"readOnly\":false,\"maxLength\":255,\"precision\":0,\"scale\":0,\"isAlert\":false,\"showIf\":null,\"showDesktop\":false,\"showMobile\":false,\"editableOnMobile\":false,\"requiredOnMobile\":false,\"displayOrder\":6},{\"id\":\"226c5d35-ed6b-4224-b6f8-8938d9acb972\",\"name\":\"DOB\",\"schemaName\":\"Accounts\",\"label\":\"DOB\",\"description\":null,\"fieldType\":\"date\",\"mapping\":\"DOB__c\",\"referenceSchemaName\":null,\"referenceSchemaFieldName\":null,\"required\":false,\"upsertKey\":false,\"accessMode\":\"read_write\",\"readOnly\":false,\"maxLength\":null,\"precision\":0,\"scale\":0,\"isAlert\":false,\"showIf\":null,\"showDesktop\":false,\"showMobile\":false,\"editableOnMobile\":false,\"requiredOnMobile\":false,\"displayOrder\":9},{\"id\":\"c933f989-be09-481e-89e5-82876b8dee2b\",\"name\":\"City\",\"schemaName\":\"Accounts\",\"label\":\"City\",\"description\":null,\"fieldType\":\"string\",\"mapping\":\"City__c\",\"referenceSchemaName\":null,\"referenceSchemaFieldName\":null,\"required\":false,\"upsertKey\":false,\"accessMode\":\"read_write\",\"readOnly\":false,\"maxLength\":50,\"precision\":0,\"scale\":0,\"isAlert\":false,\"showIf\":null,\"showDesktop\":false,\"showMobile\":false,\"editableOnMobile\":false,\"requiredOnMobile\":false,\"displayOrder\":10},{\"id\":\"54e717cb-52cc-468c-924c-80f92db02b9c\",\"name\":\"Street\",\"schemaName\":\"Accounts\",\"label\":\"Street\",\"description\":null,\"fieldType\":\"string\",\"mapping\":\"Street__c\",\"referenceSchemaName\":null,\"referenceSchemaFieldName\":null,\"required\":false,\"upsertKey\":false,\"accessMode\":\"read_write\",\"readOnly\":false,\"maxLength\":255,\"precision\":0,\"scale\":0,\"isAlert\":false,\"showIf\":null,\"showDesktop\":false,\"showMobile\":false,\"editableOnMobile\":false,\"requiredOnMobile\":false,\"displayOrder\":11},{\"id\":\"bec4d34e-419a-4625-980f-12eb3c17369f\",\"name\":\"Mobile\",\"schemaName\":\"Accounts\",\"label\":\"Mobile\",\"description\":null,\"fieldType\":\"phone\",\"mapping\":\"PersonMobilePhone\",\"referenceSchemaName\":null,\"referenceSchemaFieldName\":null,\"required\":false,\"upsertKey\":false,\"accessMode\":\"read_write\",\"readOnly\":false,\"maxLength\":40,\"precision\":0,\"scale\":0,\"isAlert\":false,\"showIf\":null,\"showDesktop\":false,\"showMobile\":false,\"editableOnMobile\":false,\"requiredOnMobile\":false,\"displayOrder\":12},{\"id\":\"cf4f4a26-7dd0-4c08-aad1-e814a856109b\",\"name\":\"State\",\"schemaName\":\"Accounts\",\"label\":\"State\",\"description\":null,\"fieldType\":\"picklist\",\"mapping\":\"State__c\",\"referenceSchemaName\":null,\"referenceSchemaFieldName\":null,\"required\":false,\"upsertKey\":false,\"accessMode\":\"read_write\",\"readOnly\":false,\"maxLength\":255,\"precision\":0,\"scale\":0,\"isAlert\":false,\"showIf\":null,\"showDesktop\":false,\"showMobile\":false,\"editableOnMobile\":false,\"requiredOnMobile\":false,\"displayOrder\":13},{\"id\":\"4ca60212-cfc4-4e60-b6d5-6d9d059d0938\",\"name\":\"Email\",\"schemaName\":\"Accounts\",\"label\":\"Email\",\"description\":null,\"fieldType\":\"email\",\"mapping\":\"PersonEmail\",\"referenceSchemaName\":null,\"referenceSchemaFieldName\":null,\"required\":false,\"upsertKey\":false,\"accessMode\":\"read_write\",\"readOnly\":false,\"maxLength\":80,\"precision\":0,\"scale\":0,\"isAlert\":false,\"showIf\":null,\"showDesktop\":false,\"showMobile\":false,\"editableOnMobile\":false,\"requiredOnMobile\":false,\"displayOrder\":16},{\"id\":\"387dd8ce-fa74-4492-92f3-9df5bdb06c2a\",\"name\":\"ZipCode\",\"schemaName\":\"Accounts\",\"label\":\"Zip Code\",\"description\":null,\"fieldType\":\"string\",\"mapping\":\"Zip_Code__c\",\"referenceSchemaName\":null,\"referenceSchemaFieldName\":null,\"required\":false,\"upsertKey\":false,\"accessMode\":\"read_write\",\"readOnly\":false,\"maxLength\":10,\"precision\":0,\"scale\":0,\"isAlert\":false,\"showIf\":null,\"showDesktop\":false,\"showMobile\":false,\"editableOnMobile\":false,\"requiredOnMobile\":false,\"displayOrder\":17},{\"id\":\"f1bf1ed2-203d-4a8c-af46-22869f2de222\",\"name\":\"Country\",\"schemaName\":\"Accounts\",\"label\":\"Country\",\"description\":null,\"fieldType\":\"picklist\",\"mapping\":\"Country__c\",\"referenceSchemaName\":null,\"referenceSchemaFieldName\":null,\"required\":false,\"upsertKey\":false,\"accessMode\":\"read_write\",\"readOnly\":false,\"maxLength\":255,\"precision\":0,\"scale\":0,\"isAlert\":false,\"showIf\":null,\"showDesktop\":false,\"showMobile\":false,\"editableOnMobile\":false,\"requiredOnMobile\":false,\"displayOrder\":19},{\"id\":\"6a968e5a-b5f2-482b-accd-cc053d599f48\",\"name\":\"AptSuiteOther\",\"schemaName\":\"Accounts\",\"label\":\"Apt/Suite/Other\",\"description\":null,\"fieldType\":\"string\",\"mapping\":\"Apt_Suite_Other__c\",\"referenceSchemaName\":null,\"referenceSchemaFieldName\":null,\"required\":false,\"upsertKey\":false,\"accessMode\":\"read_write\",\"readOnly\":false,\"maxLength\":255,\"precision\":0,\"scale\":0,\"isAlert\":false,\"showIf\":null,\"showDesktop\":false,\"showMobile\":false,\"editableOnMobile\":false,\"requiredOnMobile\":false,\"displayOrder\":21},{\"id\":\"c66cc562-9b7f-4a47-81fd-eaa264ebffb8\",\"name\":\"MiddleName\",\"schemaName\":\"Accounts\",\"label\":\"Middle Name\",\"description\":null,\"fieldType\":\"string\",\"mapping\":\"MiddleName\",\"referenceSchemaName\":null,\"referenceSchemaFieldName\":null,\"required\":false,\"upsertKey\":false,\"accessMode\":\"read_write\",\"readOnly\":false,\"maxLength\":40,\"precision\":0,\"scale\":0,\"isAlert\":false,\"showIf\":null,\"showDesktop\":false,\"showMobile\":false,\"editableOnMobile\":false,\"requiredOnMobile\":false,\"displayOrder\":22}]},\"Users\":{\"name\":\"Users\",\"label\":\"Users\",\"mapping\":\"User\",\"isStandard\":true,\"fields\":[{\"id\":\"cb0e8f72-d3d6-491a-bb92-3180b183802e\",\"name\":\"Username\",\"schemaName\":\"Users\",\"label\":\"Username\",\"description\":null,\"fieldType\":\"string\",\"mapping\":\"Username\",\"referenceSchemaName\":null,\"referenceSchemaFieldName\":null,\"required\":true,\"upsertKey\":false,\"accessMode\":\"read_write\",\"readOnly\":false,\"maxLength\":80,\"precision\":0,\"scale\":0,\"isAlert\":false,\"showIf\":null,\"showDesktop\":true,\"showMobile\":false,\"editableOnMobile\":false,\"requiredOnMobile\":false,\"displayOrder\":0}]}}"
}

function App() {

  const [loading, setLoading] = useState(true)

  const [skedLocalStorage, setSkedLocalStorage] = useState(mock);
  const [isSked, setIsSked] = useState(window.location.host.includes("localhost"))

  useEffect(() => {
    if (!chrome || !chrome.tabs) {
      return
    }
    chrome.tabs.query({ active: true, currentWindow: true }, (tabs) => {
      const tab = tabs[0]
      if (tab.url.includes("skedulo")) {
        chrome.tabs.executeScript(tab.id, { code: `Object.keys(localStorage).reduce((result, key) => ({...result, [key]: localStorage[key]}) , {})` }, ([localStorageData]) => {
          // console.log('skedLocalStorage', localStorageData)
          setSkedLocalStorage(localStorageData)
        });
        setIsSked(true)
      } else {
        setIsSked(false)
      }
    })
  }, [skedLocalStorage])

  const auth = useMemo(() => skedLocalStorage.auth ? JSON.parse(skedLocalStorage.auth) : {}, [skedLocalStorage])
  const accessToken = useMemo(() => auth.skedApiAccessToken || null, [auth])
  const idToken = useMemo(() => auth.idToken || null, [auth])

  if (!isSked) {
    return <div className="btn btn-success bg-white btn-block"><a href="https://new.skedulo.com/"><FontAwesomeIcon icon={faExternalLinkSquareAlt} /> Skedulo </a></div>
  }

  return (
    <>
      <Context.Provider value={{ setLoading, skedLocalStorage, accessToken, idToken }}>
        <div className={"app d-flex flex-column " + (loading && "blur")} >
          <div className="header bg-info text-white p-2">
            <h5 className="m-0">Sked tools by Stiger</h5>
          </div>
          <div className="body p-2 d-flex flex-column">
            <div className="copy-token">
              <h6 className="text-muted">Copy Token</h6>
              <button className="btn btn-primary mr-1" onClick={() => copyTextToClipboard(accessToken)}><FontAwesomeIcon icon={faCopy} /> Session Token</button>
              <button className="btn btn-success" onClick={() => copyTextToClipboard(idToken)}><FontAwesomeIcon icon={faCopy} /> User Token</button>
            </div>

            <div className="sked-sdk mt-2">
              <SdkHandler accessToken={accessToken} />
            </div>

            <div className="sked-sdk mt-2">
              <CfHandler />
            </div>
          </div>

        </div>
      </Context.Provider>
      {loading && <Loading />}
    </>
  );
}

export default App;
